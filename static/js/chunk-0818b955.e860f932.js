(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0818b955"],{"307c":function(t,e,i){},9183:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-wrap"},[e("div",{staticClass:"title"},[t._v("视频截图拼接小工具")]),e("div",{staticClass:"container"},[e("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"图片截图",name:"picture"}},[e("Picture")],1),e("el-tab-pane",{attrs:{label:"视频截图",name:"video"}},[e("el-form",{ref:"form",attrs:{"label-width":"80px"}},[e("el-form-item",{attrs:{label:"上传视频"}},[e("el-upload",{ref:"upload",attrs:{accept:".mp4, .avi, .mov",action:"",limit:1,"on-exceed":t.onUploadExceed,"on-change":t.onUploadChange,"auto-upload":!1,"on-remove":t.handleRemove}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传.mp4, .avi, .mov文件")])],1)],1),e("el-form-item",[e("el-button",{attrs:{type:"primary",disabled:!t.currentVideoUrl},on:{click:t.onPreview}},[t._v("预览")])],1)],1),e("el-dialog",{attrs:{title:"截取图片",visible:t.centerDialogVisible,"close-on-click-modal":!1,"before-close":t.closeDialog,width:"50%"},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[e("div",{staticClass:"box"},[e("video",{ref:"currentVideo",attrs:{muted:"true",autoplay:"",controls:"",src:t.currentVideoUrl,width:"100%"},domProps:{muted:!0}}),e("div",{staticClass:"line",style:"bottom:"+t.lineHeight+"px"})]),e("el-button",{attrs:{type:"primary"},on:{click:t.getImgBase64}},[t._v("截取视频当前画面")]),t.imageList?e("div",{staticClass:"img-list"},[t._l(t.imageList,(function(i,a){return[e("el-popover",{key:a,attrs:{placement:"top-start",width:"300",trigger:"hover"}},[e("div",[e("el-image",{staticStyle:{width:"300px"},attrs:{src:t.imageList[a],fit:"cover"}}),e("el-button",{attrs:{type:"danger",title:"删除",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.onDelete(a)}}}),0!==a?e("el-button",{attrs:{type:"primary",title:"左移",icon:"el-icon-back",circle:""},on:{click:function(e){return t.onMove(a,"left")}}}):t._e(),a!==t.imageList.length-1?e("el-button",{attrs:{type:"primary",title:"右移",icon:"el-icon-right",circle:""},on:{click:function(e){return t.onMove(a,"right")}}}):t._e()],1),e("el-image",{staticStyle:{width:"100px"},attrs:{slot:"reference",src:t.imageList[a],fit:"cover"},slot:"reference"})],1)]}))],2):t._e(),e("div",{staticClass:"block"},[e("span",{staticClass:"demonstration"},[t._v("截图高度")]),e("el-slider",{attrs:{step:1,min:1,max:t.videoHeight},model:{value:t.heigth,callback:function(e){t.heigth=e},expression:"heigth"}})],1),e("div",{staticClass:"block"},[e("el-switch",{attrs:{"active-text":"首图剪裁","inactive-text":"首图不剪裁"},model:{value:t.special,callback:function(e){t.special=e},expression:"special"}})],1),e("el-button",{attrs:{type:"primary",disabled:0==t.imageList.length},on:{click:t.onStitch}},[t._v("拼接图片")]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary",disabled:!t.stitchImg},on:{click:t.downImg}},[t._v("下载拼接图片")])],1)],1)],1)],1)],1)])},s=[],o=(i("7f7f"),i("28a5"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"picture"},[e("el-form",{ref:"form",attrs:{"label-width":"80px"}},[e("el-form-item",{attrs:{label:"上传图片"}},[e("el-upload",{ref:"upload",attrs:{accept:".jpg, .png",action:"",multiple:!0,"on-change":t.onUploadChange,"auto-upload":!1,"on-remove":t.handleRemove}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e("p",[t._v("只能上传.png, .jpg,文件")]),e("p",[t._v("每个图片的大小需一致")])])],1)],1),e("el-form-item",[e("el-button",{attrs:{type:"primary",disabled:0==t.imgList.length},on:{click:t.onPreview}},[t._v("预览")])],1)],1),e("el-dialog",{attrs:{title:"截取图片",visible:t.centerDialogVisible,"close-on-click-modal":!1,"before-close":t.closeDialog,width:"800px"},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[e("div",{staticClass:"box"},[e("div",{staticClass:"block"},[e("el-switch",{attrs:{"active-text":"首图剪裁","inactive-text":"首图不剪裁"},model:{value:t.special,callback:function(e){t.special=e},expression:"special"}})],1),e("el-form",{attrs:{"label-width":"80px"}},[e("el-form-item",{attrs:{label:"截图高度"}},[e("el-slider",{attrs:{step:1,min:1,max:t.reallHeight},model:{value:t.heigth,callback:function(e){t.heigth=e},expression:"heigth"}})],1)],1),e("el-button",{attrs:{type:"primary",disabled:0==t.imgListCopy.length},on:{click:t.onStitch}},[t._v("拼接图片")]),e("el-button",{attrs:{type:"primary",disabled:!t.stitchImg},on:{click:t.downImg}},[t._v("下载拼接图片")]),t._l(t.imgListCopy,(function(i,a){return[e("div",{staticClass:"img-box",style:t.special||0!=a?"height: ".concat(t.heigth,"px"):""},[e("el-image",{ref:"img",refInFor:!0,class:t.special||0!=a?"img":"img1",style:t.special||0!=a?"top: -".concat(t.reallHeight-t.heigth,"px"):"",attrs:{src:t.imgListCopy[a]}}),e("div",{staticClass:"operation"},[e("el-button",{attrs:{type:"danger",title:"删除",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.onDelete(a)}}}),0!==a?e("el-button",{attrs:{type:"primary",title:"上移",icon:"el-icon-top",circle:""},on:{click:function(e){return t.onMove(a,"top")}}}):t._e(),a!==t.imgListCopy.length-1?e("el-button",{attrs:{type:"primary",title:"下移",icon:"el-icon-bottom",circle:""},on:{click:function(e){return t.onMove(a,"bottom")}}}):t._e()],1)],1)]}))],2)])],1)}),n=[],l=(i("20d6"),{data:function(){return{imgList:[],imgListCopy:[],uidList:[],centerDialogVisible:!1,heigth:0,special:!1,reallHeight:0,imageHeight:0,imageWidth:0,stitchImg:""}},watch:{heigth:function(t,e){}},methods:{onDelete:function(t){this.imgListCopy.splice(t,1)},onMove:function(t,e){if("bottom"===e){var i=this.imageList[t];this.$set(this.imageList,t,this.imageList[t+1]),this.$set(this.imageList,t+1,i)}else{var a=this.imageList[t];this.$set(this.imageList,t,this.imageList[t-1]),this.$set(this.imageList,t-1,a)}},downImg:function(){var t=document.createElement("a");t.download="stitch",t.style.display="none",t.setAttribute("download","stitch"),t.href=this.stitchImg,document.body.appendChild(t),t.click(),document.body.removeChild(t)},onStitch:function(){var t=this;this.mergeImgs(this.imgListCopy).then((function(e){t.stitchImg=e}))},mergeImgs:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.imageWidth,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:parseInt(this.heigth*this.imageWidth/760);return new Promise((function(s,o){var n=document.createElement("canvas");n.width=i,n.height=e.special?a*t.length:e.imageHeight+a*(t.length-1);var l=n.getContext("2d");t.map((function(o,c){var r=new Image;r.src=o,r.crossOrigin="Anonymous",r.onload=function(){e.special||0!=c?l.drawImage(r,0,e.imageHeight-a,i,a,0,e.special?a*c:e.imageHeight+a*(c-1),i,a):l.drawImage(r,0,0,i,e.imageHeight),c===t.length-1&&s(n.toDataURL("image/png"))}}))}))},closeDialog:function(){this.centerDialogVisible=!1},onPreview:function(){var t=this;this.imgListCopy=JSON.parse(JSON.stringify(this.imgList)),this.centerDialogVisible=!0,setTimeout((function(){var e=t.$refs.img;t.imageHeight=e[0].imageHeight,t.imageWidth=e[0].imageWidth,t.reallHeight=parseInt(760/t.imageWidth*t.imageHeight),t.heigth=100}),300)},onUploadChange:function(t,e){this.imgList.push(URL.createObjectURL(t.raw)),this.uidList.push(t.uid)},handleRemove:function(t,e){var i=this.uidList.findIndex((function(e){return e===t.uid}));this.uidList.splice(i,1),this.imgList.splice(i,1)}}}),c=l,r=(i("9ec7"),i("2877")),h=Object(r["a"])(c,o,n,!1,null,null,null),g=h.exports,m={components:{Picture:g},data:function(){return{formData:{},centerDialogVisible:!1,currentVideoUrl:null,startTime:"",endTime:"",imageList:[],imageList1:[],videoWidth:"",videoHeight:0,heigth:0,videoReallHeight:0,lineHeight:0,stitchImg:"",special:!1,activeName:"picture"}},watch:{heigth:function(t,e){this.lineHeight=t/this.videoHeight*this.videoReallHeight}},methods:{downImg:function(){var t=document.createElement("a");t.download="stitch",t.style.display="none",t.setAttribute("download","stitch"),t.href=this.stitchImg,document.body.appendChild(t),t.click(),document.body.removeChild(t)},onDelete:function(t){this.imageList.splice(t,1)},onMove:function(t,e){if("right"===e){var i=this.imageList[t];this.$set(this.imageList,t,this.imageList[t+1]),this.$set(this.imageList,t+1,i)}else{var a=this.imageList[t];this.$set(this.imageList,t,this.imageList[t-1]),this.$set(this.imageList,t-1,a)}},onStitch:function(){var t=this;this.mergeImgs(this.imageList).then((function(e){t.stitchImg=e}))},mergeImgs:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.videoWidth,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.heigth;return new Promise((function(s,o){var n=document.createElement("canvas");n.width=i,n.height=e.special?a*t.length:e.videoHeight+a*(t.length-1);var l=n.getContext("2d");t.map((function(o,c){var r=new Image;r.src=o,r.crossOrigin="Anonymous",r.onload=function(){e.special||0!=c?l.drawImage(r,0,e.videoHeight-a,i,a,0,e.special?a*c:e.videoHeight+a*(c-1),i,a):l.drawImage(r,0,0,i,e.videoHeight),c===t.length-1&&s(n.toDataURL("image/png"))}}))}))},getImgBase64:function(){var t=this.$refs.currentVideo,e=document.createElement("canvas");e.width=this.videoWidth,e.height=this.videoHeight;var i=e.getContext("2d");i.drawImage(t,0,0);var a=e.toDataURL("image/png");this.imageList.push(a)},onPreview:function(){var t=this;this.centerDialogVisible=!0,setTimeout((function(){var e=t.$refs.currentVideo;t.videoWidth=e.videoWidth,t.videoHeight=e.videoHeight,t.heigth=200,t.videoReallHeight=e.clientHeight}),500)},closeDialog:function(){this.centerDialogVisible=!1,this.imageList=[],this.videoWidth="",this.videoHeight=0,this.heigth=0,this.videoReallHeight=0,this.lineHeight=0,this.stitchImg="",this.special=!1},onUploadChange:function(t,e){var i=t.name.split(".");i[i.length-1];this.currentVideoUrl=URL.createObjectURL(t.raw),this.formData=null,this.formData=new FormData,this.formData.append("fileSize",t.size),this.formData.append("firmwareFile",t.raw)},onUploadExceed:function(t,e,i){e[0].name=t[0].name,e[0].raw=t[0],this.onUploadChange(e[0])},handleRemove:function(){this.currentVideoUrl=null}}},d=m,u=(i("c906"),Object(r["a"])(d,a,s,!1,null,null,null));e["default"]=u.exports},"9ec7":function(t,e,i){"use strict";i("307c")},b324:function(t,e,i){},c906:function(t,e,i){"use strict";i("b324")}}]);