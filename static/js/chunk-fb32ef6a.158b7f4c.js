(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fb32ef6a"],{"00df":function(t,i,e){"use strict";e("f0ac")},"0903":function(t,i,e){"use strict";e("3e2f")},"3e2f":function(t,i,e){},9183:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t._self._c;return i("div",{staticClass:"login-wrap"},[i("div",{staticClass:"title"},[t._v("视频截图拼接小工具")]),i("div",{staticClass:"container"},[i("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(i){t.activeName=i},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"图片截图",name:"picture"}},[i("Picture")],1),i("el-tab-pane",{attrs:{label:"视频截图",name:"video"}},[i("el-form",{ref:"form",attrs:{"label-width":"80px"}},[i("el-form-item",{attrs:{label:"上传视频"}},[i("el-upload",{ref:"upload",attrs:{accept:".mp4, .avi, .mov",action:"",limit:1,"on-exceed":t.onUploadExceed,"on-change":t.onUploadChange,"auto-upload":!1,"on-remove":t.handleRemove}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传.mp4, .avi, .mov文件")])],1)],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",disabled:!t.currentVideoUrl},on:{click:t.onPreview}},[t._v("预览")])],1)],1),i("el-dialog",{attrs:{title:"截取图片",visible:t.centerDialogVisible,"close-on-click-modal":!1,"before-close":t.closeDialog,width:"50%"},on:{"update:visible":function(i){t.centerDialogVisible=i}}},[i("div",{staticClass:"box"},[i("video",{ref:"currentVideo",attrs:{muted:"true",autoplay:"",controls:"",src:t.currentVideoUrl,width:"100%"},domProps:{muted:!0}}),i("div",{staticClass:"line",style:"bottom:"+t.lineHeight1+"px"}),i("div",{staticClass:"line",style:"bottom:"+t.lineHeight0+"px"})]),i("el-button",{attrs:{type:"primary"},on:{click:t.getImgBase64}},[t._v("截取视频当前画面")]),t.imageList?i("div",{staticClass:"img-list"},[t._l(t.imageList,(function(e,s){return[i("el-popover",{key:s,attrs:{placement:"top-start",width:"300",trigger:"hover"}},[i("div",[i("el-image",{staticStyle:{width:"300px"},attrs:{src:t.imageList[s],fit:"cover"}}),i("el-button",{attrs:{type:"danger",title:"删除",icon:"el-icon-delete",circle:""},on:{click:function(i){return t.onDelete(s)}}}),0!==s?i("el-button",{attrs:{type:"primary",title:"左移",icon:"el-icon-back",circle:""},on:{click:function(i){return t.onMove(s,"left")}}}):t._e(),s!==t.imageList.length-1?i("el-button",{attrs:{type:"primary",title:"右移",icon:"el-icon-right",circle:""},on:{click:function(i){return t.onMove(s,"right")}}}):t._e()],1),i("el-image",{staticStyle:{width:"100px"},attrs:{slot:"reference",src:t.imageList[s],fit:"cover"},slot:"reference"})],1)]}))],2):t._e(),i("div",{staticClass:"block"},[i("span",{staticClass:"demonstration"},[t._v("截图高度")]),i("el-slider",{attrs:{step:1,range:"",min:0,max:t.videoHeight},model:{value:t.heigth,callback:function(i){t.heigth=i},expression:"heigth"}})],1),i("div",{staticClass:"block"},[i("el-switch",{attrs:{"active-text":"首图剪裁","inactive-text":"首图不剪裁"},model:{value:t.special,callback:function(i){t.special=i},expression:"special"}})],1),i("el-button",{attrs:{type:"primary",disabled:0==t.imageList.length},on:{click:t.onStitch}},[t._v("拼接图片")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",disabled:!t.stitchImg},on:{click:t.downImg}},[t._v("下载拼接图片")])],1)],1)],1)],1)],1)])},a=[],o=(e("7f7f"),e("28a5"),function(){var t=this,i=t._self._c;return i("div",{staticClass:"picture"},[i("el-form",{ref:"form",attrs:{"label-width":"80px"}},[i("el-form-item",{attrs:{label:"上传图片"}},[i("el-upload",{ref:"upload",attrs:{accept:".jpg, .png",action:"",multiple:!0,"on-change":t.onUploadChange,"auto-upload":!1,"on-remove":t.handleRemove}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[i("p",[t._v("只能上传.png, .jpg,文件")]),i("p",[t._v("每个图片的大小需一致")])])],1)],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",disabled:0==t.imgList.length},on:{click:t.onPreview}},[t._v("预览")])],1)],1),i("el-dialog",{attrs:{title:"截取图片",visible:t.centerDialogVisible,"close-on-click-modal":!1,"before-close":t.closeDialog,width:"800px"},on:{"update:visible":function(i){t.centerDialogVisible=i}}},[i("div",{staticClass:"box"},[i("div",{staticClass:"block"},[i("el-switch",{attrs:{"active-text":"首图剪裁","inactive-text":"首图不剪裁"},model:{value:t.special,callback:function(i){t.special=i},expression:"special"}})],1),i("el-form",{attrs:{"label-width":"80px"}},[i("el-form-item",{attrs:{label:"截图高度"}},[i("el-slider",{attrs:{range:"",step:1,min:0,max:t.reallHeight},model:{value:t.height,callback:function(i){t.height=i},expression:"height"}})],1)],1),i("el-button",{attrs:{type:"primary",disabled:0==t.imgListCopy.length},on:{click:t.onStitch}},[t._v("拼接图片")]),i("el-button",{attrs:{type:"primary",disabled:!t.stitchImg},on:{click:t.downImg}},[t._v("下载拼接图片")]),t._l(t.imgListCopy,(function(e,s){return[i("div",{staticClass:"img-box",style:t.special||0!=s?"height: ".concat(t.height[1]-t.height[0],"px"):""},[i("el-image",{ref:"img",refInFor:!0,class:t.special||0!=s?"img":"img1",style:t.special||0!=s?"top: ".concat(t.height[1]-t.reallHeight,"px"):"",attrs:{src:t.imgListCopy[s]}}),i("div",{staticClass:"operation"},[i("el-button",{attrs:{type:"danger",title:"删除",icon:"el-icon-delete",circle:""},on:{click:function(i){return t.onDelete(s)}}}),0!==s?i("el-button",{attrs:{type:"primary",title:"上移",icon:"el-icon-top",circle:""},on:{click:function(i){return t.onMove(s,"top")}}}):t._e(),s!==t.imgListCopy.length-1?i("el-button",{attrs:{type:"primary",title:"下移",icon:"el-icon-bottom",circle:""},on:{click:function(i){return t.onMove(s,"bottom")}}}):t._e()],1)],1)]}))],2)])],1)}),n=[],l=(e("20d6"),{data:function(){return{imgList:[],imgListCopy:[],uidList:[],centerDialogVisible:!1,height:[0,0],special:!1,reallHeight:0,imageHeight:0,imageWidth:0,stitchImg:""}},methods:{onDelete:function(t){this.imgListCopy.splice(t,1)},onMove:function(t,i){if("bottom"===i){var e=this.imgListCopy[t];this.$set(this.imgListCopy,t,this.imgListCopy[t+1]),this.$set(this.imgListCopy,t+1,e)}else{var s=this.imgListCopy[t];this.$set(this.imgListCopy,t,this.imgListCopy[t-1]),this.$set(this.imgListCopy,t-1,s)}},downImg:function(){var t=document.createElement("a");t.download="stitch",t.style.display="none",t.setAttribute("download","stitch"),t.href=this.stitchImg,document.body.appendChild(t),t.click(),document.body.removeChild(t)},onStitch:function(){var t=this;this.mergeImgs(this.imgListCopy).then((function(i){t.stitchImg=i}))},mergeImgs:function(t){var i=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.imageWidth,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:parseInt((this.height[1]-this.height[0])*this.imageWidth/760);return new Promise((function(a,o){var n=document.createElement("canvas");n.width=e,n.height=i.special?s*t.length:i.imageHeight+s*(t.length-1);var l=n.getContext("2d");t.map((function(o,c){var r=new Image;r.src=o,r.crossOrigin="Anonymous",r.onload=function(){i.special||0!=c?l.drawImage(r,0,i.imageHeight-i.height[1]*i.imageWidth/760,e,s,0,i.special?s*c:i.imageHeight+s*(c-1),e,s):l.drawImage(r,0,0,e,i.imageHeight),c===t.length-1&&a(n.toDataURL("image/png"))}}))}))},closeDialog:function(){this.centerDialogVisible=!1},onPreview:function(){var t=this;this.imgListCopy=JSON.parse(JSON.stringify(this.imgList)),this.centerDialogVisible=!0,setTimeout((function(){var i=t.$refs.img;t.imageHeight=i[0].imageHeight,t.imageWidth=i[0].imageWidth,t.reallHeight=parseInt(760/t.imageWidth*t.imageHeight),t.height=[0,100]}),300)},onUploadChange:function(t,i){this.imgList.push(URL.createObjectURL(t.raw)),this.uidList.push(t.uid)},handleRemove:function(t,i){var e=this.uidList.findIndex((function(i){return i===t.uid}));this.uidList.splice(e,1),this.imgList.splice(e,1)}}}),c=l,r=(e("0903"),e("2877")),h=Object(r["a"])(c,o,n,!1,null,null,null),g=h.exports,m={components:{Picture:g},data:function(){return{formData:{},centerDialogVisible:!1,currentVideoUrl:null,startTime:"",endTime:"",imageList:[],imageList1:[],videoWidth:"",videoHeight:0,heigth:[0,0],videoReallHeight:0,stitchImg:"",special:!1,activeName:"picture"}},watch:{heigth:function(t,i){this.lineHeight0=t[0]/this.videoHeight*this.videoReallHeight,this.lineHeight1=t[1]/this.videoHeight*this.videoReallHeight}},computed:{lineHeight0:function(){return this.heigth[0]/this.videoHeight*this.videoReallHeight},lineHeight1:function(){return this.heigth[1]/this.videoHeight*this.videoReallHeight}},methods:{downImg:function(){var t=document.createElement("a");t.download="stitch",t.style.display="none",t.setAttribute("download","stitch"),t.href=this.stitchImg,document.body.appendChild(t),t.click(),document.body.removeChild(t)},onDelete:function(t){this.imageList.splice(t,1)},onMove:function(t,i){if("right"===i){var e=this.imageList[t];this.$set(this.imageList,t,this.imageList[t+1]),this.$set(this.imageList,t+1,e)}else{var s=this.imageList[t];this.$set(this.imageList,t,this.imageList[t-1]),this.$set(this.imageList,t-1,s)}},onStitch:function(){var t=this;this.mergeImgs(this.imageList).then((function(i){t.stitchImg=i}))},mergeImgs:function(t){var i=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.videoWidth,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.heigth[1]-this.heigth[0];return new Promise((function(a,o){var n=document.createElement("canvas");n.width=e,n.height=i.special?s*t.length:i.videoHeight+s*(t.length-1);var l=n.getContext("2d");t.map((function(o,c){var r=new Image;r.src=o,r.crossOrigin="Anonymous",r.onload=function(){i.special||0!=c?l.drawImage(r,0,i.videoHeight-i.heigth[1],e,s,0,i.special?s*c:i.videoHeight+s*(c-1),e,s):l.drawImage(r,0,0,e,i.videoHeight),c===t.length-1&&a(n.toDataURL("image/png"))}}))}))},getImgBase64:function(){var t=this.$refs.currentVideo,i=document.createElement("canvas");i.width=this.videoWidth,i.height=this.videoHeight;var e=i.getContext("2d");e.drawImage(t,0,0);var s=i.toDataURL("image/png");this.imageList.push(s)},onPreview:function(){var t=this;this.centerDialogVisible=!0,setTimeout((function(){var i=t.$refs.currentVideo;t.videoWidth=i.videoWidth,t.videoHeight=i.videoHeight,t.heigth=[0,200],t.videoReallHeight=i.clientHeight}),500)},closeDialog:function(){this.centerDialogVisible=!1,this.imageList=[],this.videoWidth="",this.videoHeight=0,this.heigth=[0,0],this.videoReallHeight=0,this.lineHeight0=0,this.lineHeight1=0,this.stitchImg="",this.special=!1},onUploadChange:function(t,i){var e=t.name.split(".");e[e.length-1];this.currentVideoUrl=URL.createObjectURL(t.raw),this.formData=null,this.formData=new FormData,this.formData.append("fileSize",t.size),this.formData.append("firmwareFile",t.raw)},onUploadExceed:function(t,i,e){i[0].name=t[0].name,i[0].raw=t[0],this.onUploadChange(i[0])},handleRemove:function(){this.currentVideoUrl=null}}},d=m,p=(e("00df"),Object(r["a"])(d,s,a,!1,null,null,null));i["default"]=p.exports},f0ac:function(t,i,e){}}]);